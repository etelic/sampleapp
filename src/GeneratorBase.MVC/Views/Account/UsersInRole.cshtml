@model GeneratorBase.MVC.Models.SelectUsersInRoleViewModel
@{
    ViewBag.Title = "Users In Role";
}

<script>
    $(document).ready(function () {
        $("#searchkey").keypress(function (e) {
            if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
                $("#btnSearcuser").bind("click", (function () {
                }));
                $('#btnSearcuser').trigger("click");
                return false;
            }
        })
    });

    function SearchUser(e, url) {
        window.location.href = url + "?searchkey=" + $("#searchkey").val();
    }
    function SearchUserClear(e, url) {
        window.location.href = url + "?searchkey=" + "";
    }

</script>
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-title">
            <i class="glyphicon glyphicon-thumbs-up text-primary" style="margin-bottom:-20px;"></i> Admin <i class="glyphicon glyphicon-chevron-right small"></i>  <span> View </span> <i class="glyphicon glyphicon-chevron-right small"></i> 

    @if (Model.UserCount > 50)
    {
        <span>
            Users for @Html.DisplayFor(model => model.RoleName)  
        </span>
        <label class="pull-right" style="padding:5px; color:#1B704E; font-size:14px;">Currently showing first 50 users, Get more from search.</label>
    }
    else
    {
        <span>
            Users for @Html.DisplayFor(model => model.RoleName) 
        </span>
    }


        </h1>
    </div>
</div>
<div class='col-sm-12 col-md-12 col-xs-12' style="padding:0px; margin:0px;">
    <div class='form-group'>
        <div class="input-group col-sm-12 col-md-12 col-xs-12">
            @Html.TextBox("searchkey", null, new { @class = "form-control fixsearchbox", @placeholder = "Search" })
            <div class="input-group-btn">
                <a id="btnSearcuser" onclick="SearchUser(event,'@Url.Action("UsersInRole","Account", new { id = Model.RoleName })');" data-original-title="Grid Search" class="btn btn-default btn-default tip-top" style="padding:3px 5px;"><span class="fam-zoom"></span></a>
                <button id="btnSearcuserClear" type="button" class="btn btn-default btn-default collapse-data-btn tip-top" onclick="SearchUserClear(event,'@Url.Action("UsersInRole","Account", new { id = Model.RoleName })');" data-original-title="Clear Search" data-placement="top" style="padding:3px 5px;">
                    <span class="fam-delete"></span>
                </button>
            </div>
        </div>
    </div>
</div>
<div class="col-md-12 col-sm-12 col-xs-12" style="padding:0px; margin:0px;">

    @using (Html.BeginForm("UsersInRole", "Account", FormMethod.Post, new { encType = "multipart/form-data", name = "myform" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)


        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="panel panel-default AppForm">
                    <div class="panel-heading clearfix">
                        <i class="icon-calendar"></i>
                        <h3 class="panel-title">Select Users Assignments</h3>
                    </div>
                    <div class="panel-body" style="padding:8px; margin:0px;">
                        @Html.HiddenFor(model => model.RoleName)

                        <table class="table table-striped table-bordered table-hover table-condensed">
                            <tr>
                                <th style="width:50px; text-align:center;">
                                    Select
                                </th>
                                <th>
                                    User
                                </th>
                            </tr>
                            @Html.EditorFor(modelItem => modelItem.Users)
                        </table>
                    </div>
                </div>
            </div>
        </div>
        @Html.ActionLink("Back to List", "ReturnToUsersInRole", null, new { @class = "btn btn-default" })
        <input type="submit" value="Save" class="btn btn-primary" />

    }
</div>
<div style="clear:both; margin-bottom:20px;"></div>
